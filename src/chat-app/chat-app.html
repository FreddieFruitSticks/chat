<link rel="import" href="../../bower_components/polymer/polymer.html">
<link rel="import" href="../../bower_components/polymer/polymer-element.html">
<link rel="import" href="./page-one.html">

<!-- app-layout -->
<link rel="import" href="../../bower_components/app-layout/app-drawer-layout/app-drawer-layout.html">
<link rel="import" href="../../bower_components/app-layout/app-drawer/app-drawer.html">
<link rel="import" href="../../bower_components/app-layout/app-toolbar/app-toolbar.html">
<link rel="import" href="../../bower_components/app-layout/app-header-layout/app-header-layout.html">

<!-- paper input -->
<link rel="import" href="../../bower_components/paper-input/paper-input.html">

<!-- Iron -->
<link rel="import" href="../../bower_components/iron-selector/iron-selector.html">

<!-- Routing -->
<link rel="import" href="../../bower_components/app-route/app-location.html">
<link rel="import" href="../../bower_components/app-route/app-route.html">

<dom-module id="chat-app">
  <template>
    <style>
      :host{
        display:block;
        --app-secondary-color:black;
      }
      .my-drawer {
        background-color: #E7E7E7;
        height:85%;
      }
      .my-topbar {
        background-color: #d91511
      }
      .chat-input {
        position:fixed;
        bottom:40px;
        width:50%;
      }

      .drawer-list a{
        display:block;
        padding: 0 16px;
        color:var(--app-secondary-color);
        line-height:40px;
      }
      .drawer-list a.iron-selected{
        color:black;
        font-weight:bold;
      }

    </style>
    <app-drawer-layout class="my-drawer" fullbleed>

      <app-drawer slot="drawer">
        <app-toolbar>List</app-toolbar>
        <iron-selector class="drawer-list" selected="[[page]]" attr-for-selected="name">
          <a name="page-one" href="/page-one">Page One</a>
          <a name="page-two" href="/page-two">Page Two</a>
        </iron-selector>
      </app-drawer>

      <app-header-layout>
        <app-header>
          <app-toolbar class="my-topbar">
            Chat2
          </app-toolbar>
        </app-header>
      </app-header-layout>

      <paper-input label="Message" class="chat-input">
      </paper-input>
    <app-drawer-layout>

    <app-location route={{route}}></app-location>
    <app-route
      route={{route}}
      pattern="/  :page"
      data={{routeData}}>
    <app-route>
    <iron-pages
      selected="[[routeData.page]]"
      attr-for-selected="name"
      fallback-selection="page-one"
      role="main">

      <page-one name="page-one"></page-one>
      <page-two name="page-two"></page-two>

    </iron-pages>

  </template>

  <script>
    'use strict'
    class ChatApp extends Polymer.Element{
      static get is(){return "chat-app"}

      static get config(){
        return {
          properties:{
            page: {
              type:String,
              reflectToAttribute: true,
              observer: 'pageChanged'
            }
          }
        };
      }
      pageChanged(page, oldPage){
        console.log(page)
      }

    }
    customElements.define(ChatApp.is, ChatApp);

  </script>
</dom-module>
